!function(t){function i(){this.up=!1,this.left=!1,this.right=!1,this.down=!1,this.space=!1}t.Keybard=i,i.prototype.init=function(){t.addEventListener("keydown",this.keyDown.bind(this),!1),t.addEventListener("keyup",this.keyUp.bind(this),!1)},i.prototype.dealWithKeybard=function(t,i){switch(t.keyCode){case 37:this.left=i;break;case 38:this.up=i;break;case 39:this.right=i;break;case 40:this.down=i;break;case 32:this.space=i}},i.prototype.keyDown=function(t){this.dealWithKeybard(t,!0)},i.prototype.keyUp=function(t){this.dealWithKeybard(t,!1)}}(window),function(t){function i(){this.x=0,this.y=0,this.width=10,this.height=5,this.speed=7,this.vy=0,this.vx=0,this.inAir=!0,this.color="#1BBC9B",this.killed=!1}t.Bullet=i,i.prototype.init=function(t){this.killed=!1,t.directionRight?(this.x=t.x+t.width,this.vx=this.speed):(this.x=t.x,this.vx=-1*this.speed),this.y=t.y+t.height/2-this.height/2},i.prototype.update=function(){this.x+=this.vx},i.prototype.collide=function(){this.killed=!0},i.prototype.draw=function(t){this.killed||(t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath())}}(window),function(t){function i(t){this.x=20,this.y=20,this.width=20,this.height=20,this.color="white",t&&(this.game=t,this.keyboard=t.keyboard),this.friction=.7,this.speed=7,this.jump=-18,this.vy=0,this.vx=0,this.inAir=!1,this.directionRight=!0,this.killed=!1,this.lastFire=Date.now(),this.reloadTime=400}t.Player=i,i.prototype.draw=function(t){t.beginPath(),t.rect(this.x,this.y,this.width,this.height),t.fillStyle=this.color,t.fill(),t.closePath()},i.prototype.update=function(){this.keyboard.right&&(this.vx+=this.speed,this.directionRight=!0),this.keyboard.left&&(this.vx-=this.speed,this.directionRight=!1),this.vx*=this.friction,this.x+=this.vx,this.keyboard.up&&!this.inAir&&(this.vy=this.jump,this.inAir=!0),this.keyboard.space&&Date.now()-this.lastFire>this.reloadTime&&(this.game.addBullet(this),this.lastFire=Date.now()),this.y+=this.vy},i.prototype.collide=function(t){}}(window),function(t){function i(){this.collection=[]}t.Enemies=i,i.prototype.addEnemy=function(t){this.collection.push(new Enemy(t))},i.prototype.update=function(t){for(var i=this.collection.length-1;i>=0;i--)this.collection[i].update(),t(this.collection[i])},i.prototype.removeKilled=function(){for(var t=this.collection.length-1;t>=0;t--)this.collection[t].killed&&this.collection.splice(t,1)},i.prototype.draw=function(t){for(var i=this.collection.length-1;i>=0;i--)this.collection[i].draw(t)}}(window),function(t){function i(t){Player.apply(this),this.x=t,this.inAir=!0,this.speed=1,this.color="#E64C66"}t.Enemy=i,i.prototype=new Player,i.prototype.constructor=i,i.prototype.update=function(){this.inAir||(this.vx+=this.speed,this.vx*=this.friction),this.x+=this.vx,this.y+=this.vy},i.prototype.collide=function(t){Game.prototype.isPrototypeOf(t)?this.speed*=-1:Bullet.prototype.isPrototypeOf(t)&&(this.killed=!0)}}(window),function(t){function i(t,i){this.canvas=t,this.keyboard=i,this.bullets=[],this.player=null,this.enemies=new Enemies}t.Game=i,i.prototype.init=function(t,i){this.width=t,this.height=i,this.player=new Player(this),this.player.x=50,this.player.y=50,this.enemies.addEnemy(t/4),this.enemies.addEnemy(t/2),requestAnimationFrame(this.update.bind(this))},i.prototype.update=function(){this.gravity(this.player),this.player.update(),this.collideWithWorld(this.player),this.enemies.update(function(t){this.gravity(t),this.collideWithWorld(t)}.bind(this));for(var t=this.bullets.length-1;t>=0;t--)this.bullets[t].update(),this.collideWithWorld(this.bullets[t]);this.collideGroups(this.enemies,this.bullets),this.removeKilled(),this.enemies.removeKilled(),requestAnimationFrame(this.update.bind(this))},i.prototype.collideGroups=function(t,i){t.collection&&(t=t.collection),i.collection&&(i=i.collection);for(var e=0;e<t.length;e++)for(var h=e;h<i.length;h++)this.collide(i[h],t[e])},i.prototype.collideWithWorld=function(t){t.y+t.height>this.height&&(t.y=this.height-t.height,t.inAir=!1),t.x<0?(t.x=0,t.collide(this)):t.x+t.width>this.width&&(t.x=this.width-t.width,t.collide(this))},i.prototype.collide=function(t,i){this.checkCollision(t,i)&&(t.collide(i),i.collide(t))},i.prototype.checkCollision=function(t,i){return!(t.x+t.width<i.x||i.x+i.width<t.x||t.y+t.height<i.y||i.y+i.height<t.y)},i.prototype.gravity=function(t){t.vy+=.8},i.prototype.addBullet=function(t){var i=new Bullet;i.init(t),this.bullets.push(i)},i.prototype.removeKilled=function(){for(var t=this.bullets.length-1;t>=0;t--)this.bullets[t].killed&&this.bullets.splice(t,1)}}(window),function(t){function i(t){this.game=t,this.canvas=t.canvas,this.c=t.canvas.getContext("2d")}t.Render=i,i.prototype.init=function(){requestAnimationFrame(this.draw.bind(this)),this.width=this.game.width,this.height=this.game.height,this.canvas.width=this.width,this.canvas.height=this.height},i.prototype.draw=function(){this.canvas.width=this.width,this.game.player.draw(this.c),this.game.enemies.draw(this.c);for(var t=this.game.bullets.length-1;t>=0;t--)this.game.bullets[t].draw(this.c);requestAnimationFrame(this.draw.bind(this))}}(window),function(t,i){var e=new Keybard;e.init();var h=new Game(i.getElementById("game"),e),s=new Render(h);h.init(640,480),s.init()}(window,document);